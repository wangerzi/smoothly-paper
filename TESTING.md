# 🧪 测试指南

本文档提供测试 Smoothly Paper 功能的详细说明。

## 准备工作

### 1. 启动开发服务器

```bash
npm run dev
```

服务器将在 http://localhost:3000 启动。

### 2. 准备测试 PDF

您需要一个英文学术论文 PDF 文件（≤20MB）进行测试。

**推荐测试论文来源**：
- [arXiv.org](https://arxiv.org/) - 开源论文库
- [Papers with Code](https://paperswithcode.com/) - 包含代码的论文
- 您自己的论文

## 测试流程

### Step 1: 首页测试

1. **访问首页** http://localhost:3000
   - ✅ 检查页面加载正常
   - ✅ 检查背景渐变效果
   - ✅ 检查标题和描述显示

2. **上传区域测试**
   - ✅ 拖拽 PDF 文件到上传区
   - ✅ 点击上传区选择文件
   - ✅ 验证文件类型限制（只能上传 PDF）
   - ✅ 验证文件大小限制（最大 20MB）

3. **水平选择器测试**
   - ✅ 点击三个水平选项（初级/中级/高级）
   - ✅ 检查选中状态的高亮效果

4. **开始按钮测试**
   - ✅ 未选择文件时，按钮禁用
   - ✅ 选择文件后，按钮可用
   - ✅ 点击按钮，开始上传

### Step 2: 处理页面测试

上传成功后，自动跳转到处理页面。

1. **加载动画**
   - ✅ 3D 立方体旋转动画显示
   - ✅ 进度条从 0% 开始增长

2. **进度信息**
   - ✅ 显示论文标题和页数
   - ✅ 显示当前处理步骤
   - ✅ 步骤列表按顺序完成：
     - 📄 提取论文文本
     - 📝 生成论文摘要
     - 🔪 智能分段处理
     - 🎯 标注难点术语

3. **完成跳转**
   - ✅ 进度达到 100% 后
   - ✅ 自动跳转到阅读页面

**预期时间**：10-30 秒（取决于论文长度）

### Step 3: 阅读页面测试

分析完成后，进入阅读界面。

#### 3.1 页面布局

- ✅ 检查三栏布局显示正常
  - 左侧：目录栏
  - 中间：原文区
  - 右侧：辅助面板
- ✅ 顶部标题栏显示论文信息
- ✅ 进度条显示阅读进度

#### 3.2 左侧目录栏

- ✅ 显示论文章节或段落列表
- ✅ 当前段落高亮显示
- ✅ 点击章节跳转到对应内容
- ✅ "回到开头" 和 "跳到结尾" 按钮可用

#### 3.3 中间原文区

- ✅ 段落内容正常显示
- ✅ 生词高亮显示（三种颜色）
  - 🟡 黄色：简单词（初级）
  - 🟠 橙色：中等词（中级）
  - 🌸 粉色：困难词（高级）
- ✅ 点击高亮词汇显示释义浮窗
- ✅ 浮窗显示音标、词性、释义
- ✅ 点击段落外部关闭浮窗
- ✅ 当前阅读段落有边框高亮

#### 3.4 右侧辅助面板

**术语标签页**
- ✅ 显示专业术语列表
- ✅ 显示术语定义和上下文
- ✅ 术语分类标签显示

**生词标签页**
- ✅ 显示根据用户水平标注的生词
- ✅ 显示生词数量统计
- ✅ 每个生词显示音标、词性、释义
- ✅ 根据难度显示不同颜色

**语法标签页**
- ✅ 显示复杂句子的语法分析
- ✅ 显示句子结构
- ✅ 显示详细解释

**翻译标签页**
- ✅ 显示当前段落的中文翻译
- ✅ 翻译格式清晰易读

#### 3.5 顶部控制栏

**段落导航**
- ✅ "上一段" 按钮（第一段时禁用）
- ✅ "下一段" 按钮（最后一段时禁用）
- ✅ 点击后平滑滚动到对应段落

**字号调节**
- ✅ "减小字号" 按钮（最小 12px）
- ✅ "增大字号" 按钮（最大 24px）
- ✅ 显示当前字号
- ✅ 字号变化立即生效

**护眼模式**
- ✅ 点击切换护眼模式
- ✅ 背景色变为暖色调
- ✅ 再次点击恢复正常

**面板切换**
- ✅ 隐藏/显示目录栏
- ✅ 隐藏/显示辅助面板
- ✅ 布局自动调整

### Step 4: 错误处理测试

1. **上传错误**
   - ✅ 上传非 PDF 文件，显示错误提示
   - ✅ 上传超大文件，显示错误提示
   - ✅ 未选择文件点击开始，显示提示

2. **404 页面**
   - ✅ 访问不存在的页面
   - ✅ 显示友好的 404 页面
   - ✅ "返回首页" 按钮可用

3. **错误页面**
   - ✅ 模拟错误场景
   - ✅ 显示错误信息
   - ✅ "重试" 和 "返回首页" 按钮可用

## 性能测试

### 1. 上传速度

- ✅ 5MB PDF：< 2 秒
- ✅ 10MB PDF：< 5 秒
- ✅ 20MB PDF：< 10 秒

### 2. 分析速度

- ✅ 10 页论文：< 30 秒
- ✅ 20 页论文：< 60 秒
- ✅ 50 页论文：< 120 秒

### 3. 阅读流畅度

- ✅ 段落切换：< 100ms
- ✅ 生词点击响应：< 50ms
- ✅ 页面滚动流畅
- ✅ 动画不卡顿

## 浏览器兼容性

建议在以下浏览器测试：

- ✅ Chrome 最新版
- ✅ Firefox 最新版
- ✅ Safari 最新版
- ✅ Edge 最新版

## 数据验证

### 检查数据库

```bash
# 安装 SQLite CLI（如果没有）
brew install sqlite3  # macOS
# apt install sqlite3  # Linux

# 查看数据库
sqlite3 data/papers.db

# 查看论文表
SELECT * FROM papers;

# 查看段落数量
SELECT COUNT(*) FROM paragraphs;

# 查看生词数量
SELECT COUNT(*) FROM difficult_words;

# 退出
.quit
```

### 检查上传文件

```bash
ls -lh data/uploads/
```

## 常见问题

### Q: PDF 解析失败

**解决方案**：
- 确保 PDF 不是扫描版（纯图片）
- 确保 PDF 没有加密或密码保护
- 尝试使用其他 PDF 文件

### Q: 分析卡住不动

**解决方案**：
- 检查控制台错误日志
- 刷新页面重新开始
- 检查数据库是否正常

### Q: 生词高亮不显示

**解决方案**：
- 检查是否选择了正确的英语水平
- 某些段落可能确实没有超出水平的生词
- 查看辅助面板的"生词"标签确认

## 测试清单

打印此清单，逐项测试：

**基础功能**
- [ ] 首页加载正常
- [ ] PDF 上传成功
- [ ] 分析进度正常
- [ ] 阅读界面正常

**核心功能**
- [ ] 生词高亮显示
- [ ] 词汇浮窗正常
- [ ] 术语解释显示
- [ ] 翻译功能正常

**交互功能**
- [ ] 目录导航正常
- [ ] 段落切换流畅
- [ ] 字号调节有效
- [ ] 护眼模式切换

**错误处理**
- [ ] 文件验证有效
- [ ] 错误提示友好
- [ ] 404 页面正常

## 报告问题

如果发现问题，请记录：

1. 问题描述
2. 复现步骤
3. 预期结果
4. 实际结果
5. 浏览器和版本
6. 控制台错误日志（如有）

提交 Issue 到：https://github.com/yourusername/smoothly-paper/issues

---

**测试愉快！** 🎉


